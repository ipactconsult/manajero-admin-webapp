
    <div class="row">
      <div class="col-md-4">
             <h3>Create New Event</h3>
      </div>
      <div  class="col-md-8">
             <a style="float: right;" nbTooltip="Back to list" nbTooltipStatus="primary" shape="round" status="basic" [routerLink]="['/communicationMarketing/EventMarketing']" nbButton>
                    <nb-icon icon="corner-up-right-outline"></nb-icon>
             </a>
      </div>
</div>
<form [formGroup]="EventMarketingGroup" class="mt-3">
  


    <label>Title</label>

      <div class="row">
             <div class="col-md-11">
                    <input id="title"
                    name="title" 
                    [(ngModel)]="EventMarketing.title" 
                    formControlName="title" 
                    type="text" 
                    class="form-control" 
                    nbInput
                    fullWidth
                    required
                    />
         
             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>


             <div *ngIf="(title.invalid && title.touched)" class="col-lg-11">
              <div *ngIf="title.errors?.required">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">Required Field</p>
              </div>
              <div *ngIf="title.errors?.pattern" class="mx-3 w-100">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">
                Only characters

 </p>
              </div>
            </div>



      </div>
  


      <label>Date</label>

      <div class="row">
             <div class="col-md-11">
                    <input id="date"
                    name="date" 
                    [(ngModel)]="EventMarketing.date" 
                    formControlName="date" 
                    class="form-control" 
                    [nbDatepicker]="dateTimePicker"
                    nbInput
                    fullWidth
                    required
                    />
                    <nb-datepicker #dateTimePicker></nb-datepicker>

             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>


             <div *ngIf="(date.invalid && date.touched)" class="col-lg-11">
              <div *ngIf="date.errors?.required">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">Required Field</p>
              </div>
              <div *ngIf="title.errors?.pattern" class="mx-3 w-100">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">
                ERROR

 </p>
              </div>
            </div>
      </div>




      <label>Time</label>

           <div class="row">
             <div class="col-md-11">
           
             
                  <input nbInput id="time"
                         type="text"  
                         name="time" 

                         [(ngModel)]="EventMarketing.time"
                         [nbTimepicker]="timepicker"
                         formControlName="Time" 
                         formControlName="time" 
                         class="form-control" 
                         nbInput
                         fullWidth
                         required
                         
                      />

                  
                  <nb-timepicker #timepicker></nb-timepicker>
          
             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>

             <div *ngIf="(time.invalid && time.touched)" class="col-lg-11">
              <div *ngIf="time.errors?.required">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">Required Field</p>
              </div>
              <div *ngIf="title.errors?.pattern" class="mx-3 w-100">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">
                ERROR

 </p>
              </div>
            </div>


      </div>


      <label>Price</label>

      <div class="row">
             <div class="col-md-11">
                    <input id="prix"
                    name="prix" 
                    [(ngModel)]="EventMarketing.prix" 
                    formControlName="prix" 
                    type="prix" 
                    class="form-control" 
                    nbInput
                    fullWidth
                    required
                    />
         
             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>

             <div *ngIf="(prix.invalid && prix.touched)" class="col-lg-11">
              <div *ngIf="prix.errors?.required">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">Required Field</p>
              </div>
              <div *ngIf="title.errors?.pattern" class="mx-3 w-100">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">
                ERROR

 </p>
              </div>
            </div>


             


      </div>



      <label>Number of participants</label>

      <div class="row">
             <div class="col-md-11">
                    <input id="nombre"
                    name="nombre" 
                    [(ngModel)]="EventMarketing.nombre" 
                    formControlName="nombre" 
                    type="nombre" 
                    class="form-control" 
                    nbInput
                    fullWidth
               
                    />
         
             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>
             <div *ngIf="(nombre.invalid && nombre.touched)" class="col-lg-11">
              <div *ngIf="nombre.errors?.required">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">Required Field</p>
              </div>
              <div *ngIf="title.errors?.pattern" class="mx-3 w-100">
                <p class="mt-2 alert alert-danger text-dark text-center" role="alert">
                ERROR

 </p>
              </div>
            </div>


      </div>



      <label>Address</label>

      <div class="row">
             <div class="col-md-11">
                    <input id="adresse"
                    name="adresse" 
                    [(ngModel)]="EventMarketing.adresse" 
                    formControlName="adresse" 
                    type="text" 
                    class="form-control" 
                    nbInput
                    fullWidth
                    required
                    />
         
             </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>
      </div>


      <label>Country</label>

      <div class="row">
        <div class="col-md-11">
        <nb-select size="large" placeholder="Select Country" [(ngModel)]="EventMarketing.country" 
        class="mt-1" formControlName="country" fullWidth required
                           id="country" name="country" selected="0">
                  <nb-option disabled value="0">Country</nb-option>
                  <nb-option *ngFor="let country of countries" value="{{country.country_name}}">
                    {{country.country_name}}</nb-option>
                </nb-select>
     

             
      </div>
      <div class="col-md-1">
        <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

 </div>
</div>


      <label>Description</label>

      <div class="row">
    <div class="col-md-11">
        <textarea
        [(ngModel)]="EventMarketing.description"
        formControlName="description"
        fullWidth
        id="description"
        name="description"
        nbInput
        placeholder="Description">
        
      </textarea>
  </div>
             <div class="col-md-1">
                    <nb-icon icon="info-outline" nbTooltip="Please enter valid reference" nbTooltipStatus="primary"></nb-icon>

             </div>
      </div>


      <label>Affiche</label>

      <div class="form-group row">
        <label class="label col-sm-3 col-form-label"
               for="image">Affichie</label>
        <div class="col-sm-9">
          <input (change)="onFileSelected($event)"
                 formControlName="image"
                 id="image"
                 name="image"
                 type="file"
                 required
               
          />

        </div>


        <div  class="col-md-6">
          <span [nbSpinner]="loading" nbSpinnerStatus="danger" *ngIf="EventMarketing.image == null; else erreur">
            <p class="text-warning mt-5">
             <nb-icon icon="loader-outline"></nb-icon> This Space Is Reserved For Loading Image
            </p>                  
          </span>
          <ng-template #erreur >
            <img alt="" class="w-25" src="{{EventMarketing.image}}" style="border-radius: 5px;"> 
          </ng-template> 
        </div>

      </div>


    
    
    <hr>

   <!---- <div  class="col-lg-6">
      <label for="subject"> Persona:</label>
      <nb-select [selected]="selectedItem" name="per"
      [(ngModel)]="EventMarketing.personas"  
      id="Personas"  placeholder="select Personas"
                            formControlName="Personas"  (selectedChange)="getSelectedPersona($event)">
                            <nb-option *ngFor="let x of listPersona" value="{{x.id}}">{{x.nom}}
                            </nb-option>
        </nb-select>
    </div>-------->



    <nb-card>
      <nb-card-header>Select Partners</nb-card-header>
      <nb-card-body>
        <label>Partners</label>
        <div class="row">
          <div class="col-md-11">
              <nb-select nbSelect fullWidth (selectedChange)="selectPartner($event)"
                  nbTooltip="Select one or many Partners" nbTooltipStatus="info">
                <nb-option [value]="p" *ngFor="let p of partners">
                  <nb-user [name]="p.parternershipLogo" onlyPicture picture="{{p.parternershipLogo}}"></nb-user>
 
                  {{p.parternershipName}}

                  {{p.parternershipDomain}}


                  
                </nb-option>
                <nb-option>
                  <button nbButton (click)="open2Supp(dialog)" status="primary">Create New Partner</button>
                </nb-option>
              </nb-select>
          </div>
          <div class="col-md-1">
             <nb-icon icon="info-outline" 
                      nbTooltip="Please select one or many materials" nbTooltipStatus="primary"></nb-icon>
          </div>
          <ng-template #dialog let-data let-ref="dialogRef">
                  <nb-card>
                    <nb-card-header>
                      Create New Partner
                    </nb-card-header>
                   
                    <nb-card-footer>
                      <button (click)="ref.close()" class="float-left" nbButton status="primary">
                        Close Window
                      </button>
                    </nb-card-footer>
                  </nb-card>
                </ng-template>
        </div><br/>
        <div class = "row" *ngIf="selectedParternerships.length > 0">
          <div class = "col-md-11">
         <table class="table mb-0">
          <thead class="bg-light">
           <tr>
            <th>Name</th>
          <th>Domain</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Unselect</th>
               </tr>
          </thead>
         <tbody *ngFor="let p of selectedParternerships">
          <tr class="col-md-9 col-sm-10">
          <td>
        <p class="fw-normal mb-1">
          
          <div class="d-flex align-items-center">
            <nb-user [name]="p.parternershipLogo" onlyPicture picture="{{p.parternershipLogo}}"></nb-user>
            <div class="ms-3">
              <p class=" mb-1">{{p.parternershipName}}</p>
              <p class=" mb-0">{{p.parternershipEmail}}</p>
            </div>
          </div>
        </td>
        <td><p class="fw-normal mb-1">{{p.parternershipDomain}}</p></td>
        <td><p class="fw-normal mb-1">{{p.parternershipPhone}}</p></td>
        <td><p class="fw-normal mb-1">{{p.parternershipAdresse}}  {{p.country}}    </p></td>
      


            <td>
              <p class="fw-normal mb-1">
                <button style="float: left" nbTooltip="Cancel Partner Selection" 
                        nbTooltipStatus="danger" shape="round" status="danger" 
                 nbButton (click)="cancelSelection(p)">
                     <nb-icon icon="close-outline"></nb-icon>
                </button>
              </p>
            </td>
           </tr>
          </tbody>
         </table>
            </div>
          <div class="col-md-1" *ngIf="selectedParternerships.length > 0">
             <nb-icon icon="info-outline" 
                      nbTooltip="Selected Partners" nbTooltipStatus="primary"></nb-icon>
          </div>
        </div>
        <div class="row mt-5">
    
        </div>
      </nb-card-body>
    </nb-card>






       <nb-card>
      <nb-card-header>Select Personas</nb-card-header>
      <nb-card-body>
        <label>Partners</label>
        <div class="row">
          <div class="col-md-11">
              <nb-select nbSelect fullWidth (selectedChange)="selectPersona($event)"
                  nbTooltip="Select one or many Personas" nbTooltipStatus="info">
                <nb-option [value]="p" *ngFor="let p of personas">
                  <div class="d-flex align-items-center">
                    <nb-user [name]="p.image" onlyPicture picture="{{p.image}}"></nb-user>
                    <div class="ms-3">
                      <p class=" mb-1">{{p.nom}} {{p.prenom}}</p>
                      <p class=" mb-0">{{p.email}}</p>
                    </div>
                  </div>


                  
                </nb-option>
                <nb-option>
                  <button nbButton (click)="open22Supp(dialog)" status="primary">Create New Persona</button>
                </nb-option>
              </nb-select>
          </div>
          <div class="col-md-1">
             <nb-icon icon="info-outline" 
                      nbTooltip="Please select one or many materials" nbTooltipStatus="primary"></nb-icon>
          </div>
          <ng-template #dialog let-data let-ref="dialogRef">
                  <nb-card>
                    <nb-card-header>
                      Create New Persona
                    </nb-card-header>
                   
                    <nb-card-footer>
                      <button (click)="ref.close()" class="float-left" nbButton status="primary">
                        Close Window
                      </button>
                    </nb-card-footer>
                  </nb-card>
                </ng-template>
        </div><br/>
        <div class = "row" *ngIf="selectedPersonas.length > 0">
          <div class = "col-md-11">
         <table class="table mb-0">
          <thead class="bg-light">
           <tr>
            <th>Name</th>
          <th>Domain</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Unselect</th>
               </tr>
          </thead>
         <tbody *ngFor="let p of selectedPersonas">
          <tr class="col-md-9 col-sm-10">
          <td>
        <p class="fw-normal mb-1">
          
          <div class="d-flex align-items-center">
            <nb-user [name]="p.image" onlyPicture picture="{{p.image}}"></nb-user>
            <div class="ms-3">
              <p class=" mb-1">{{p.nom}}</p>
              <p class=" mb-0">{{p.nom}}</p>
            </div>
          </div>
        </td>
        <td><p class="fw-normal mb-1">{{p.nom}}</p></td>
        <td><p class="fw-normal mb-1">{{p.nom}}</p></td>
        <td><p class="fw-normal mb-1">{{p.nom}}  {{p.nom}}    </p></td>
      


            <td>
              <p class="fw-normal mb-1">
                <button style="float: left" nbTooltip="Cancel Partner Selection" 
                        nbTooltipStatus="danger" shape="round" status="danger" 
                 nbButton (click)="cancelSelection(p)">
                     <nb-icon icon="close-outline"></nb-icon>
                </button>
              </p>
            </td>
           </tr>
          </tbody>
         </table>
            </div>
          <div class="col-md-1" *ngIf="selectedPersonas.length > 0">
             <nb-icon icon="info-outline" 
                      nbTooltip="Selected Partners" nbTooltipStatus="primary"></nb-icon>
          </div>
        </div>
        <div class="row mt-5">
    
        </div>
      </nb-card-body>
    </nb-card>
















  
 <div class="row mt-3">
        <div class="col-md-11">
             <button style="float: right;"  nbButton [disabled]="EventMarketingGroup.invalid" (click)="addEventFunction()"  status="success">
                    <nb-icon icon="checkmark-circle-outline"></nb-icon>   Save Data 
               </button>
        </div>
     
 </div>
   
</form>
