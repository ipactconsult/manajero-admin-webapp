<div *ngIf="existedPurchaseReturn" class="container">
  <div class="row">
    <div class="col-md-10 col-sm-12">
      <h2 class="more-vertical">
        Purchase Return Details </h2>
    </div>
    <div align="right" class="col-md-2 justify-content-end">
      <a (click)="goToPreviousRoute()" class="w-25 mx-3"
         fullWidth nbButton nbTooltip="Go Back" nbTooltipStatus="primary" shape="round" status="basic">
        <nb-icon icon="corner-up-right"></nb-icon>
      </a>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-12">
      <nb-accordion>
        <nb-accordion-item expanded="true">
          <nb-accordion-item-header>Purchase Return Information</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0 text-sm">Purchase Return Reference</p>
              </div>
              <div class="col-sm-9 text-success font-weight-bold">
                {{existedPurchaseReturn.purchaseReturnRef}}
              </div>
            </div>
            <hr>
                <div class="row">
              <div class="col-sm-3">
                <p class="mb-0 text-sm">Purchase Return Reason</p>
              </div>
              <div class="col-sm-9 text-danger font-weight-bold">
                {{existedPurchaseReturn.reason}}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0 text-sm">Purchase Returned To</p>
              </div>
              <div class="col-sm-9 text-info font-weight-bold">
                <a class="supplierDetails"
                   [routerLink]="['/pim/supplier', existedPurchaseReturn.material?.supplier.supplierId]">
                <span nbTooltip="Supplier Details" nbTooltipStatus="primary">
                  {{existedPurchaseReturn.material?.supplier.supplierFirstName}} 
                  {{existedPurchaseReturn.material?.supplier.supplierLastName}}
                </span>
                </a>
              </div>
            </div>
            <hr>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>
      <br>
      <nb-accordion>
        <nb-accordion-item expanded="true">
          <nb-accordion-item-header>Material Returned Details</nb-accordion-item-header>
          <nb-accordion-item-body>
            <div class="row">
            <div class = "col-md-11">
            <table class="table mb-0">
          <thead class="bg-light">
           <tr>
            <th>Material Type</th>
            <th>Material Name</th>
            <th>Material SKU</th>
            <th>Material Category</th>
            <th>Material Barcode</th>
            <th>Quantity Ordered</th>
            <th>Material Price</th>
            <th>Price + Taxes</th>
          </tr>
          </thead>
         <tbody>
          <tr class="col-md-9 col-sm-10">
           <td>
            <div class="d-flex align-items-center">
              <div class="ms-3">
                <p class=" mb-1">{{existedPurchaseReturn.material?.materialType}}</p>
              </div>
            </div>
           </td>
            <td><p class="fw-normal mb-1">{{existedPurchaseReturn.material?.materialName}}</p></td>
            <td><p class="fw-normal mb-1">{{existedPurchaseReturn.material?.materialSKU}}</p></td>
            <td><p class="fw-normal mb-1">{{existedPurchaseReturn.material?.materialCategory.categoryName}}</p></td>
            <td>
              <p class="fw-normal mb-1" *ngIf="!existedPurchaseReturn.material?.materialBarcode">
                -
              </p>
              <p class="fw-normal mb-1" *ngIf="existedPurchaseReturn.material?.materialBarcode">
                {{existedPurchaseReturn.material?.materialBarcode}}
              </p>
            </td>
            <td>
              <p class="fw-normal mb-1" *ngIf="existedPurchaseReturn.material?.materialType !== 'Service'">
                {{existedPurchaseReturn.material?.materialQuantity}}
              </p>
              <p class="fw-normal mb-1" *ngIf="existedPurchaseReturn.material?.materialType === 'Service'">
                -
              </p>
            </td>
            <td>
              <p class = "fw-normal mb-1">
                {{existedPurchaseReturn.material?.materialPrice}} {{existedPurchaseReturn.material?.materialPriceCurrency}}
              </p>
            </td>
            <td>
              <p class = "fw-normal mb-1">
                {{existedPurchaseReturn.material?.materialPrice + existedPurchaseReturn.material?.materialPrice 
              * (existedPurchaseReturn.material?.materialVAT / 100)}} {{existedPurchaseReturn.material?.materialPriceCurrency}}
              </p>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
         <div class="col-md-1">
             <nb-icon icon="info-outline" 
                      nbTooltip="Returned Material" nbTooltipStatus="primary"></nb-icon>
          </div>
        </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
      </nb-accordion>
      <br>
    </div>
  </div>
</div>
